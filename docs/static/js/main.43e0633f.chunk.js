(window["webpackJsonpmapbox-app"]=window["webpackJsonpmapbox-app"]||[]).push([[0],{15:function(e,t,r){e.exports=r(31)},20:function(e,t,r){},29:function(e,t,r){},30:function(e){e.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Point","coordinates":[24.000906986937594,49.80259820083478]},"properties":{"title":"Marker1","description":"marker1 description","score":0}}]}')},31:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(4),l=r.n(o),s=(r(20),r(3)),c=r(9),i=r(10),u=r(13),m=r(11),p=r(14),k=r(2),d=(r(29),r(30)),h="pk.eyJ1IjoiZ3J5Z29yaWkiLCJhIjoiY2swZ3QzdXhuMDQzdTNpbGpoY24zaTY4diJ9.El3swWKoso1paibm4U_F3Q",f={0:{label:"Zero",color:"black"},1:{label:"One",color:"grey"},2:{label:"Two",color:"red"},3:{label:"Three",color:"orange"},4:{label:"Four",color:"lime"},5:{label:"Five",color:"green"}},v={type:"circle",source:{type:"vector",url:"mapbox://examples.8fgz4egr"},"source-layer":"sf2010",paint:{"circle-radius":{base:1.75,stops:[[12,2],[22,180]]},"circle-color":["match",["get","score"],0,f[0].color,1,f[1].color,2,f[2].color,3,f[3].color,4,f[4].color,5,f[5].color,"white"]}},b=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={center:[24.000906986937594,49.80259820083478],zoom:[14],markers:null,selectedMarker:null},r.Mapbox=Object(k.d)({minZoom:8,maxZoom:15,accessToken:h}),r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=d;this.setState({markers:e.features})}},{key:"onAddMarker",value:function(e){var t=e.lngLat,r=[t.lng,t.lat];if(r){var a={type:"Feature",geometry:{type:"Point",coordinates:r},properties:{title:"",description:"",score:0}};this.setState((function(e){return{markers:[].concat(Object(s.a)(e.markers),[a]),selectedMarker:a,center:r,zoom:[15]}}))}}},{key:"onRemoveMarker",value:function(){var e=this._getMarkerIndex();if(e>=0){var t=Object(s.a)(this.state.markers);t.splice(e,1),this.setState({markers:t})}this.onClosePopup()}},{key:"onClosePopup",value:function(){this.setState({selectedMarker:null})}},{key:"onChangeMarkerScore",value:function(e){var t=this.state.markers,r=this._getMarkerIndex();if(r>=0){var a=Object(s.a)(t);a[r].properties.score=+e,this.setState({markers:a})}}},{key:"onMarkerHover",value:function(e,t){e.map.getCanvas().style.cursor="pointer",this.setState({selectedMarker:t})}},{key:"onMarkerNotHover",value:function(e){e.map.getCanvas().style.cursor=""}},{key:"onDrag",value:function(){this.state.selectedMarker&&this.setState({selectedMarker:null})}},{key:"onMarkerDragEnd",value:function(e){var t=this.state.markers,r=e.lngLat,a=[r.lng,r.lat],n=this._getMarkerIndex();if(n>=0&&a){var o=Object(s.a)(t);o[n].geometry.coordinates=a,this.setState({markers:o,center:a})}}},{key:"onExportData",value:function(){var e=this.state.markers;e.length&&this._exportToJsonFile(e)}},{key:"render",value:function(){var e=this.state.markers;return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("h2",null,"Mapbox app")),e&&n.a.createElement("div",{className:"wrapper"},this.renderMarkersInfo(),this.renderMap()))}},{key:"renderMap",value:function(){var e=this,t=this.state,r=t.center,a=t.zoom,o=t.selectedMarker,l=this.Mapbox;return n.a.createElement(l,{style:"mapbox://styles/mapbox/streets-v11",className:"mapContainer",center:r,zoom:a,flyToOptions:{speed:.8},onClick:function(t,r){return e.onAddMarker(r)},onDrag:function(){return e.onDrag()}},n.a.createElement(k.b,v,this.renderMarkers()),o&&this.renderMarkerPopup())}},{key:"renderMarkerPopup",value:function(){var e=this,t=this.state.selectedMarker;if(!t)return null;return n.a.createElement(k.c,{coordinates:t.geometry.coordinates,offset:{bottom:[0,-10]}},n.a.createElement("h4",null,"Marker info"),n.a.createElement("label",null,"Score:",n.a.createElement("select",{value:t.properties.score,onChange:function(t){return e.onChangeMarkerScore(t.target.value)}},function(){for(var e=[],t=0;t<Object.keys(f).length;t++)e.push(n.a.createElement("option",{key:t,value:t},f[t].label));return e}())),n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e.onClosePopup()}},"Close"),n.a.createElement("button",{onClick:function(){return e.onRemoveMarker()}},"Remove"))}},{key:"renderMarkers",value:function(){var e=this;return this.state.markers.length>0&&this.state.markers.map((function(t){return n.a.createElement(k.a,{draggable:!0,coordinates:t.geometry.coordinates,properties:t.properties,onMouseEnter:function(r){return e.onMarkerHover(r,t)},onMouseLeave:function(r){return e.onMarkerNotHover(r,t)},onDragEnd:function(t){return e.onMarkerDragEnd(t)}})}))}},{key:"renderMarkersInfo",value:function(){var e=this,t=function(t){return e.state.markers.reduce((function(e,r){return r.properties.score===+t?e+1:e}),0)};return n.a.createElement("div",{className:"markersInfo"},n.a.createElement("h3",null,"Markers info"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("th",null,n.a.createElement("td",null,"Score"),n.a.createElement("td",null,"Amount"))),n.a.createElement("tbody",null,function(){var e=[];for(var r in f)e.push(n.a.createElement("tr",null,n.a.createElement("td",null,f[r].label),n.a.createElement("td",null,t(r))));return e}()),n.a.createElement("tfoot",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("b",null,"Total")),n.a.createElement("td",null,n.a.createElement("b",null,this.state.markers.length))))),n.a.createElement("button",{onClick:function(){return e.onExportData()},disabled:!this.state.markers.length},"Export Markers as JSON"))}},{key:"_getMarkerIndex",value:function(){var e=this.state,t=e.markers,r=e.selectedMarker;return t.map((function(e){return e.geometry.coordinates})).findIndex((function(e){return e[0]===r.geometry.coordinates[0]&&e[1]===r.geometry.coordinates[1]}))}},{key:"_exportToJsonFile",value:function(e){var t=JSON.stringify(e),r="data:application/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","geoData.json"),a.click()}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.43e0633f.chunk.js.map